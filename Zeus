repeat wait() until game:IsLoaded()

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")

-- Detectar lua cheia no início da noite
local function IsFullMoonStarting()
    local sky = Lighting:FindFirstChild("Sky")
    local time = Lighting.ClockTime
    return sky and sky:GetAttribute("MoonPhase") == "FullMoon" and time >= 18 and time <= 19.5
end

-- Server Hop
local function HopServer()
    local req = (syn and syn.request) or (http_request) or (request)
    if not req then
        warn("Seu executor não suporta 'request'. Server hop não vai funcionar.")
        return
    end

    local success, response = pcall(function()
        return req({
            Url = "https://games.roblox.com/v1/games/2753915549/servers/Public?sortOrder=Asc&limit=100",
            Method = "GET"
        })
    end)

    if not success or not response then
        warn("Erro ao buscar servidores.")
        return
    end

    local servers = HttpService:JSONDecode(response.Body)
    for _, server in ipairs(servers.data) do
        if server.playing < server.maxPlayers and server.id ~= game.JobId then
            warn("Teleportando para servidor com ID:", server.id)
            TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id)
            break
        end
    end
end

-- Principal
if IsFullMoonStarting() then
    print("Lua cheia começando! Vá para o templo.")
else
    print("Lua não detectada. Procurando outro servidor...")
    HopServer()
end
