repeat wait() until game:IsLoaded()

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")

-- Verifica se a lua cheia está começando
local function IsFullMoonStarting()
    local sky = Lighting:FindFirstChild("Sky")
    if not sky then return false end

    local moon = sky:GetAttribute("MoonPhase")
    local time = Lighting.ClockTime

    return moon == "FullMoon" and time >= 18 and time <= 19.5
end

-- Função de server hop
local function HopServer()
    local req = (syn and syn.request) or request or http_request
    local servers = {}
    local res = req({
        Url = "https://games.roblox.com/v1/games/2753915549/servers/Public?sortOrder=Asc&limit=100",
        Method = "GET"
    })

    local data = HttpService:JSONDecode(res.Body)
    for _, server in pairs(data.data) do
        if server.playing < server.maxPlayers and server.id ~= game.JobId then
            TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, Players.LocalPlayer)
            wait(3)
        end
    end
end

-- Loop principal
if IsFullMoonStarting() then
    warn("Lua cheia começou! Corre pro templo.")
else
    warn("Ainda não é lua cheia... trocando de servidor.")
    HopServer()
end
